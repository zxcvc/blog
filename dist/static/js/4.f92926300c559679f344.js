webpackJsonp([4],{HOv9:function(e,s){},ijPn:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Xxa5"),n=t.n(a),r=t("mvHQ"),i=t.n(r),o=t("exGp"),u=t.n(o),c={data:function(){return{msg:"",username:"",messages:[]}},methods:{open:function(e,s,t){this.$Message({message:e,type:s,duration:t,center:!0,onClose:this.get_message})},publish:function(){var e=this;return u()(n.a.mark(function s(){var t,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=localStorage.getItem("user")||i()({username:"匿名"}),e.username=JSON.parse(t).username,e.msg){s.next=5;break}return e.open("请输入内容","error",1500),s.abrupt("return");case 5:return a={message:e.msg,time:new Date,username:e.username},s.next=8,e.$axios.post("/api/addMessage",e.$qs.stringify(a));case 8:s.sent?(e.username="",e.msg="",e.open("留言成功","success",1500)):e.open("留言失败 请稍后重试","error",1500);case 10:case"end":return s.stop()}},s,e)}))()},get_message:function(){var e=this;return u()(n.a.mark(function s(){var t;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$axios.get("/api/getMessage");case 2:t=s.sent,e.messages=t.data;case 4:case"end":return s.stop()}},s,e)}))()}},created:function(){this.get_message(),this.publish=this.throttle(this.publish,1500)}},m={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("div",{staticClass:"editor"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-7"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"form-control",attrs:{rows:"7",maxlength:"200",placeholder:"最多200字"},domProps:{value:e.msg},on:{input:function(s){s.target.composing||(e.msg=s.target.value)}}})])]),e._v(" "),t("button",{staticClass:"btn btn-info",on:{click:e.publish}},[e._v("留言")])]),e._v(" "),t("ul",{staticClass:"board"},e._l(e.messages,function(s){return t("li",{key:s._id},[t("dl",{},[t("dt",[e._v(e._s(s.message))]),t("br"),e._v(" "),t("dd",[e._v(e._s(s.username))]),e._v(" "),t("dd",[t("i",[e._v(e._s(e._f("fmTime")(s.time)))])])])])}),0)])},staticRenderFns:[]};var l=t("VU/8")(c,m,!1,function(e){t("HOv9")},"data-v-4118a104",null);s.default=l.exports}});
//# sourceMappingURL=4.f92926300c559679f344.js.map