{"version":3,"sources":["webpack:///src/views/message_board.vue","webpack:///./src/views/message_board.vue?1e32","webpack:///./src/views/message_board.vue"],"names":["message_board","data","msg","username","messages","methods","open","typ","duration","this","$Message","message","type","center","onClose","get_message","publish","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","user","message_info","wrap","_context","prev","next","localStorage","getItem","stringify_default","JSON","parse","abrupt","time","Date","$axios","post","$qs","stringify","sent","stop","_this2","_callee2","ret","_context2","get","created","throttle","views_message_board","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","rows","maxlength","placeholder","domProps","on","input","$event","target","composing","_v","click","_l","item","key","_id","_s","_f","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6LAuBAA,GACAC,KADA,WAEA,OACAC,IAAA,GACAC,SAAA,GACAC,cAGAC,SACAC,KADA,SACAJ,EAAAK,EAAAC,GACAC,KAAAC,UACAC,QAAAT,EACAU,KAAAL,EACAC,WACAK,QAAA,EACAC,QAAAL,KAAAM,eAGAC,QAVA,WAUA,IAAAC,EAAAR,KAAA,OAAAS,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAL,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACAL,EAAAM,aAAAC,QAAA,SAAAC,KAAA5B,SAAA,OACAc,EAAAd,SAAA6B,KAAAC,MAAAV,GAAApB,SACAc,EAAAf,IAHA,CAAAwB,EAAAE,KAAA,eAIAX,EAAAX,KAAA,sBAJAoB,EAAAQ,OAAA,wBAOAV,GACAb,QAAAM,EAAAf,IACAiC,KAAA,IAAAC,KACAjC,SAAAc,EAAAd,UAVAuB,EAAAE,KAAA,EAYAX,EAAAoB,OAAAC,KAAA,kBAAArB,EAAAsB,IAAAC,UAAAhB,IAZA,OAAAE,EAAAe,MAcAxB,EAAAd,SAAA,GACAc,EAAAf,IAAA,GACAe,EAAAX,KAAA,wBAEAW,EAAAX,KAAA,2BAlBA,yBAAAoB,EAAAgB,SAAApB,EAAAL,KAAAC,IAqBAH,YA/BA,WA+BA,IAAA4B,EAAAlC,KAAA,OAAAS,IAAAC,EAAAC,EAAAC,KAAA,SAAAuB,IAAA,IAAAC,EAAA,OAAA1B,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACAe,EAAAN,OAAAU,IAAA,mBADA,OACAF,EADAC,EAAAL,KAEAE,EAAAvC,SAAAyC,EAAA5C,KAFA,wBAAA6C,EAAAJ,SAAAE,EAAAD,KAAAzB,KAKA8B,QA5CA,WA6CAvC,KAAAM,cACAN,KAAAO,QAAAP,KAAAwC,SAAAxC,KAAAO,QAAA,QClEekC,GADEC,OAFjB,WAA0B,IAAAC,EAAA3C,KAAa4C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,YAAiBG,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAT,EAAA,IAAAU,WAAA,QAAgEL,YAAA,eAAAM,OAAoCC,KAAA,IAAAC,UAAA,MAAAC,YAAA,UAAoDC,UAAWN,MAAAT,EAAA,KAAkBgB,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCpB,EAAAlD,IAAAoE,EAAAC,OAAAV,eAA8BT,EAAAqB,GAAA,KAAAlB,EAAA,UAA+BE,YAAA,eAAAW,IAA+BM,MAAAtB,EAAApC,WAAqBoC,EAAAqB,GAAA,UAAArB,EAAAqB,GAAA,KAAAlB,EAAA,MAAwCE,YAAA,SAAoBL,EAAAuB,GAAAvB,EAAA,kBAAAwB,GAAsC,OAAArB,EAAA,MAAgBsB,IAAAD,EAAAE,MAAavB,EAAA,SAAYA,EAAA,MAAAH,EAAAqB,GAAArB,EAAA2B,GAAAH,EAAAjE,YAAA4C,EAAA,MAAAH,EAAAqB,GAAA,KAAAlB,EAAA,MAAAH,EAAAqB,GAAArB,EAAA2B,GAAAH,EAAAzE,aAAAiD,EAAAqB,GAAA,KAAAlB,EAAA,MAAAA,EAAA,KAAAH,EAAAqB,GAAArB,EAAA2B,GAAA3B,EAAA4B,GAAA,SAAA5B,CAAAwB,EAAAzC,kBAAyL,MAE/5B8C,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpF,EACAkD,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/4.f92926300c559679f344.js","sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"editor\">\n            <div class=\"row\">\n                <div class=\"col-lg-7\">\n                    <textarea class=\"form-control\" rows=\"7\" maxlength=\"200\" placeholder=\"最多200字\" v-model=\"msg\"></textarea>\n                </div>\n            </div>\n            <button class=\"btn btn-info\" @click=\"publish\">留言</button>\n        </div>\n        <ul class=\"board\">\n            <li v-for=\"item in messages\" :key=\"item._id\">\n                <dl v-cloak>\n                    <dt>{{item.message}}</dt><br>\n                    <dd>{{item.username}}</dd>\n                    <dd><i>{{item.time | fmTime}}</i></dd>\n                </dl>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            msg: \"\",\n            username: \"\",\n            messages: []\n        };\n    },\n    methods: {\n        open(msg, typ, duration) {\n            this.$Message({\n                message: msg,\n                type: typ,\n                duration: duration,\n                center: true,\n                onClose: this.get_message\n            })\n        },\n        async publish() {\n            let user = localStorage.getItem(\"user\") || JSON.stringify({ username: '匿名' })\n            this.username = JSON.parse(user).username;\n            if(!this.msg){\n                this.open('请输入内容','error',1500)\n                return\n            }\n            let message_info = {\n                message: this.msg,\n                time: new Date(),\n                username: this.username\n            }\n            let ret = await this.$axios.post('/api/addMessage', this.$qs.stringify(message_info))\n            if (ret) {\n                this.username = ''\n                this.msg = ''\n                this.open('留言成功', 'success', 1500)\n            } else {\n                this.open('留言失败 请稍后重试', 'error', 1500)\n            }\n        },\n        async get_message() {\n            let ret = await this.$axios.get('/api/getMessage')\n            this.messages = ret.data\n        },\n    },\n    created() {\n        this.get_message()\n        this.publish = this.throttle(this.publish,1500)\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.col-lg-7 {\n    margin-bottom: 2%;\n}\n\n.container {\n    .editor {\n        margin-bottom: 5%;\n    }\n    .board {\n        width: 75%;\n        padding-left: 0;\n        li {\n            margin-bottom: 8%;\n        }\n        p {\n            word-break: break-all;\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/message_board.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"editor\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-7\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msg),expression:\"msg\"}],staticClass:\"form-control\",attrs:{\"rows\":\"7\",\"maxlength\":\"200\",\"placeholder\":\"最多200字\"},domProps:{\"value\":(_vm.msg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msg=$event.target.value}}})])]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-info\",on:{\"click\":_vm.publish}},[_vm._v(\"留言\")])]),_vm._v(\" \"),_c('ul',{staticClass:\"board\"},_vm._l((_vm.messages),function(item){return _c('li',{key:item._id},[_c('dl',{},[_c('dt',[_vm._v(_vm._s(item.message))]),_c('br'),_vm._v(\" \"),_c('dd',[_vm._v(_vm._s(item.username))]),_vm._v(\" \"),_c('dd',[_c('i',[_vm._v(_vm._s(_vm._f(\"fmTime\")(item.time)))])])])])}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4118a104\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/message_board.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4118a104\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./message_board.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./message_board.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./message_board.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4118a104\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./message_board.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4118a104\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/message_board.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}